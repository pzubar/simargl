<!-- Content Header -->
<div class="card mb-8">
    <div class="card-body">
        <div class="lg:flex lg:items-center lg:justify-between">
            <div class="flex-1 min-w-0">
                <div class="flex items-center">
                    {{#if content.metadata.thumbnails.high}}
                        <img class="h-20 w-20 rounded-lg object-cover mr-6" src="{{content.metadata.thumbnails.high}}" alt="">
                    {{/if}}
                    <div>
                        <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate">
                            {{content.title}}
                        </h2>
                        <div class="mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:space-x-6">
                            <div class="mt-2 flex items-center text-sm text-gray-500">
                                <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v1a1 1 0 01-1 1v9a2 2 0 01-2 2H5a2 2 0 01-2-2V7a1 1 0 01-1-1V5a1 1 0 011-1h4zM9 4h6V3H9v1zm8 13V8H7v9h10z"></path>
                                </svg>
                                {{content.channel.channelName}}
                            </div>
                            <div class="mt-2 flex items-center text-sm text-gray-500">
                                <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                Published {{formatDate content.publishedAt}}
                            </div>
                            {{#if content.metadata.viewCount}}
                                <div class="mt-2 flex items-center text-sm text-gray-500">
                                    <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                    {{formatNumber content.metadata.viewCount}} views
                                </div>
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-5 flex lg:mt-0 lg:ml-4">
                <span class="sm:ml-3">
                    <a href="https://www.youtube.com/watch?v={{content.sourceContentId}}" target="_blank" class="btn btn-primary">
                        <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2M7 13l3 3 7-7"></path>
                        </svg>
                        Watch on YouTube
                    </a>
                </span>
                <span class="ml-3 sm:ml-0">
                    <a href="/admin/contents/{{content._id}}/edit" class="btn btn-secondary">
                        <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                        Edit
                    </a>
                </span>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Main Content -->
    <div class="lg:col-span-2 space-y-8">
        {{#if content.analysis}}
            <!-- Analysis Results -->
            <div class="card">
                <div class="card-header">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-medium text-gray-900">Analysis Results</h3>
                        <div class="flex items-center space-x-2">
                            {{#if content.analysis.modelUsed}}
                                <span class="badge badge-blue">{{content.analysis.modelUsed}}</span>
                            {{/if}}
                            <span class="badge badge-green">
                                <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                                    <circle cx="4" cy="4" r="3" />
                                </svg>
                                Completed
                            </span>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    {{#if content.analysis.result}}
                        {{#if content.analysis.result.metadata}}
                            <!-- Video Metadata -->
                            <div class="mb-8">
                                <h4 class="text-md font-semibold text-gray-900 mb-4">Video Metadata</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {{#if content.analysis.result.metadata.primary_language}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <dt class="text-sm font-medium text-gray-500">Primary Language</dt>
                                            <dd class="mt-1 text-sm text-gray-900">{{content.analysis.result.metadata.primary_language}}</dd>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.metadata.hosts_or_speakers}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <dt class="text-sm font-medium text-gray-500">Hosts/Speakers</dt>
                                            <dd class="mt-1 text-sm text-gray-900">
                                                {{#each content.analysis.result.metadata.hosts_or_speakers}}
                                                    <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2.5 py-0.5 rounded-full mr-2 mb-1">{{this}}</span>
                                                {{/each}}
                                            </dd>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.metadata.video_type}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <dt class="text-sm font-medium text-gray-500">Video Type</dt>
                                            <dd class="mt-1 text-sm text-gray-900">{{content.analysis.result.metadata.video_type}}</dd>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.metadata.content_category}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <dt class="text-sm font-medium text-gray-500">Content Category</dt>
                                            <dd class="mt-1 text-sm text-gray-900">{{content.analysis.result.metadata.content_category}}</dd>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        {{/if}}

                        {{#if content.analysis.result.narrative_analysis}}
                            <!-- Narrative Analysis -->
                            <div class="mb-8">
                                <h4 class="text-md font-semibold text-gray-900 mb-4">Narrative Analysis</h4>
                                <div class="space-y-4">
                                    {{#if content.analysis.result.narrative_analysis.primary_narrative_frame}}
                                        <div class="bg-blue-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-blue-900 mb-2">Primary Narrative Frame</h5>
                                            <p class="text-sm text-blue-800">{{content.analysis.result.narrative_analysis.primary_narrative_frame}}</p>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.narrative_analysis.secondary_narrative_frames}}
                                        <div class="bg-green-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-green-900 mb-2">Secondary Narrative Frames</h5>
                                            <ul class="list-disc list-inside space-y-1 text-sm text-green-800">
                                                {{#each content.analysis.result.narrative_analysis.secondary_narrative_frames}}
                                                    <li>{{this}}</li>
                                                {{/each}}
                                            </ul>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.narrative_analysis.plot_summary}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-gray-900 mb-2">Plot Summary</h5>
                                            <p class="text-sm text-gray-700">{{content.analysis.result.narrative_analysis.plot_summary}}</p>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.narrative_analysis.narrative_characters}}
                                        <div class="bg-purple-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-purple-900 mb-2">Narrative Characters</h5>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                                {{#if content.analysis.result.narrative_analysis.narrative_characters.heroes}}
                                                    <div>
                                                        <h6 class="font-medium text-purple-900">Heroes</h6>
                                                        <ul class="list-disc list-inside text-purple-700">
                                                            {{#each content.analysis.result.narrative_analysis.narrative_characters.heroes}}
                                                                <li>{{this}}</li>
                                                            {{/each}}
                                                        </ul>
                                                    </div>
                                                {{/if}}
                                                {{#if content.analysis.result.narrative_analysis.narrative_characters.villains}}
                                                    <div>
                                                        <h6 class="font-medium text-purple-900">Villains</h6>
                                                        <ul class="list-disc list-inside text-purple-700">
                                                            {{#each content.analysis.result.narrative_analysis.narrative_characters.villains}}
                                                                <li>{{this}}</li>
                                                            {{/each}}
                                                        </ul>
                                                    </div>
                                                {{/if}}
                                                {{#if content.analysis.result.narrative_analysis.narrative_characters.victims}}
                                                    <div>
                                                        <h6 class="font-medium text-purple-900">Victims</h6>
                                                        <ul class="list-disc list-inside text-purple-700">
                                                            {{#each content.analysis.result.narrative_analysis.narrative_characters.victims}}
                                                                <li>{{this}}</li>
                                                            {{/each}}
                                                        </ul>
                                                    </div>
                                                {{/if}}
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        {{/if}}

                        {{#if content.analysis.result.rhetorical_and_emotional_analysis}}
                            <!-- Rhetorical and Emotional Analysis -->
                            <div class="mb-8">
                                <h4 class="text-md font-semibold text-gray-900 mb-4">Rhetorical & Emotional Analysis</h4>
                                <div class="space-y-4">
                                    {{#if content.analysis.result.rhetorical_and_emotional_analysis.speaker_tone_and_style}}
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-gray-900 mb-2">Speaker Tone & Style</h5>
                                            <p class="text-sm text-gray-700">{{content.analysis.result.rhetorical_and_emotional_analysis.speaker_tone_and_style}}</p>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.rhetorical_and_emotional_analysis.emotional_appeals}}
                                        <div class="bg-red-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-red-900 mb-2">Emotional Appeals</h5>
                                            <div class="flex flex-wrap gap-2">
                                                {{#each content.analysis.result.rhetorical_and_emotional_analysis.emotional_appeals}}
                                                    <span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">{{this}}</span>
                                                {{/each}}
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.rhetorical_and_emotional_analysis.loaded_language_and_keywords}}
                                        <div class="bg-orange-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-orange-900 mb-2">Loaded Language & Keywords</h5>
                                            <div class="flex flex-wrap gap-2">
                                                {{#each content.analysis.result.rhetorical_and_emotional_analysis.loaded_language_and_keywords}}
                                                    <span class="inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">{{this}}</span>
                                                {{/each}}
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.rhetorical_and_emotional_analysis.call_to_action}}
                                        <div class="bg-yellow-50 p-4 rounded-lg">
                                            <h5 class="text-sm font-medium text-yellow-900 mb-2">Call to Action</h5>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <dt class="text-xs font-medium text-yellow-700">Type</dt>
                                                    <dd class="text-sm text-yellow-800">{{content.analysis.result.rhetorical_and_emotional_analysis.call_to_action.cta_type}}</dd>
                                                </div>
                                                {{#if content.analysis.result.rhetorical_and_emotional_analysis.call_to_action.cta_text}}
                                                    <div>
                                                        <dt class="text-xs font-medium text-yellow-700">Text</dt>
                                                        <dd class="text-sm text-yellow-800">{{content.analysis.result.rhetorical_and_emotional_analysis.call_to_action.cta_text}}</dd>
                                                    </div>
                                                {{/if}}
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        {{/if}}

                        {{#if content.analysis.result.entity_and_topic_indexing}}
                            <!-- Key Themes & Entities -->
                            <div class="mb-8">
                                <h4 class="text-md font-semibold text-gray-900 mb-4">Key Themes & Entities</h4>
                                <div class="space-y-4">
                                    {{#if content.analysis.result.entity_and_topic_indexing.key_concepts_and_themes}}
                                        <div>
                                            <h5 class="text-sm font-medium text-gray-900 mb-2">Key Concepts & Themes</h5>
                                            <div class="flex flex-wrap gap-2">
                                                {{#each content.analysis.result.entity_and_topic_indexing.key_concepts_and_themes}}
                                                    <span class="inline-block bg-indigo-100 text-indigo-800 text-sm px-3 py-1 rounded-full">{{this}}</span>
                                                {{/each}}
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.entity_and_topic_indexing.named_entities}}
                                        <div>
                                            <h5 class="text-sm font-medium text-gray-900 mb-2">Named Entities</h5>
                                            <div class="flex flex-wrap gap-2">
                                                {{#each content.analysis.result.entity_and_topic_indexing.named_entities}}
                                                    <span class="inline-block bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded-full">{{this}}</span>
                                                {{/each}}
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        {{/if}}

                        {{#if content.analysis.result.classification}}
                            <!-- Classification -->
                            <div class="mb-8">
                                <h4 class="text-md font-semibold text-gray-900 mb-4">Classification</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {{#if content.analysis.result.classification.is_manipulative}}
                                        <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                                            <h5 class="text-sm font-medium text-red-900 mb-2">Manipulative Content</h5>
                                            <div class="space-y-2">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-xs font-medium text-red-700">Decision:</span>
                                                    <span class="px-2 py-1 text-xs rounded-full {{#if (eq content.analysis.result.classification.is_manipulative.decision 'true')}}bg-red-200 text-red-800{{else}}bg-green-200 text-green-800{{/if}}">
                                                        {{#if (eq content.analysis.result.classification.is_manipulative.decision 'true')}}Manipulative{{else}}Not Manipulative{{/if}}
                                                    </span>
                                                </div>
                                                <div class="flex items-center justify-between">
                                                    <span class="text-xs font-medium text-red-700">Confidence:</span>
                                                    <span class="text-xs text-red-800">{{content.analysis.result.classification.is_manipulative.confidence}}</span>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-xs font-medium text-red-700 block mb-1">Reasoning:</span>
                                                    <p class="text-xs text-red-800">{{content.analysis.result.classification.is_manipulative.reasoning}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if content.analysis.result.classification.is_disinformation}}
                                        <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                                            <h5 class="text-sm font-medium text-yellow-900 mb-2">Disinformation Content</h5>
                                            <div class="space-y-2">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-xs font-medium text-yellow-700">Decision:</span>
                                                    <span class="px-2 py-1 text-xs rounded-full {{#if (eq content.analysis.result.classification.is_disinformation.decision 'true')}}bg-yellow-200 text-yellow-800{{else}}bg-green-200 text-green-800{{/if}}">
                                                        {{#if (eq content.analysis.result.classification.is_disinformation.decision 'true')}}Disinformation{{else}}Not Disinformation{{/if}}
                                                    </span>
                                                </div>
                                                <div class="flex items-center justify-between">
                                                    <span class="text-xs font-medium text-yellow-700">Confidence:</span>
                                                    <span class="text-xs text-yellow-800">{{content.analysis.result.classification.is_disinformation.confidence}}%</span>
                                                </div>
                                                <div class="mt-2">
                                                    <span class="text-xs font-medium text-yellow-700 block mb-1">Reasoning:</span>
                                                    <p class="text-xs text-yellow-800">{{content.analysis.result.classification.is_disinformation.reasoning}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        {{/if}}
                    {{else}}
                        <div class="text-center py-8">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <h3 class="mt-2 text-sm font-medium text-gray-900">No analysis data</h3>
                            <p class="mt-1 text-sm text-gray-500">The analysis results are not available or incomplete.</p>
                        </div>
                    {{/if}}
                </div>
            </div>
        {{else}}
            <!-- No Analysis Available -->
            <div class="card">
                <div class="card-body text-center py-12">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                    <h3 class="mt-2 text-sm font-medium text-gray-900">No Analysis Available</h3>
                    <p class="mt-1 text-sm text-gray-500">This content hasn't been analyzed yet.</p>
                    <div class="mt-6">
                        <button onclick="triggerAnalysis('{{content._id}}')" class="btn btn-primary">
                            <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            Start Analysis
                        </button>
                    </div>
                </div>
            </div>
        {{/if}}
    </div>

    <!-- Sidebar -->
    <div class="space-y-6">
        <!-- Content Info -->
        <div class="card">
            <div class="card-header">
                <h3 class="text-lg font-medium text-gray-900">Content Information</h3>
            </div>
            <div class="card-body">
                <dl class="space-y-4">
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Status</dt>
                        <dd class="mt-1">
                            {{#if (eq content.status 'ANALYZED')}}
                                <span class="badge badge-green">
                                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                                        <circle cx="4" cy="4" r="3" />
                                    </svg>
                                    Analyzed
                                </span>
                            {{else if (eq content.status 'PROCESSING')}}
                                <span class="badge badge-yellow">
                                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-yellow-400" fill="currentColor" viewBox="0 0 8 8">
                                        <circle cx="4" cy="4" r="3" />
                                    </svg>
                                    Processing
                                </span>
                            {{else if (eq content.status 'FAILED')}}
                                <span class="badge badge-red">
                                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-red-400" fill="currentColor" viewBox="0 0 8 8">
                                        <circle cx="4" cy="4" r="3" />
                                    </svg>
                                    Failed
                                </span>
                            {{else}}
                                <span class="badge badge-blue">
                                    <svg class="-ml-0.5 mr-1.5 h-2 w-2 text-blue-400" fill="currentColor" viewBox="0 0 8 8">
                                        <circle cx="4" cy="4" r="3" />
                                    </svg>
                                    {{content.status}}
                                </span>
                            {{/if}}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Source ID</dt>
                        <dd class="mt-1 text-sm text-gray-900">
                            <code class="bg-gray-100 px-2 py-1 rounded text-xs">{{content.sourceId}}</code>
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Duration</dt>
                        <dd class="mt-1 text-sm text-gray-900">
                            {{#if content.metadata.duration}}
                                {{content.metadata.duration}}
                            {{else}}
                                â€”
                            {{/if}}
                        </dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Created</dt>
                        <dd class="mt-1 text-sm text-gray-900">{{formatDate content.createdAt}}</dd>
                    </div>
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Updated</dt>
                        <dd class="mt-1 text-sm text-gray-900">{{formatDate content.updatedAt}}</dd>
                    </div>
                </dl>
            </div>
        </div>

        {{#if content.description}}
            <!-- Description -->
            <div class="card">
                <div class="card-header">
                    <h3 class="text-lg font-medium text-gray-900">Description</h3>
                </div>
                <div class="card-body">
                    <p class="text-sm text-gray-700">{{content.description}}</p>
                </div>
            </div>
        {{/if}}

        <!-- Actions -->
        <div class="card">
            <div class="card-header">
                <h3 class="text-lg font-medium text-gray-900">Actions</h3>
            </div>
            <div class="card-body">
                <div class="space-y-3">
                    {{#unless content.analysis}}
                        <button onclick="triggerAnalysis('{{content._id}}')" class="w-full btn btn-success">
                            <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            {{#if (eq content.status 'FAILED')}}Retry Analysis{{else}}Start Analysis{{/if}}
                        </button>
                    {{/unless}}
                    <a href="/admin/contents/{{content._id}}/edit" class="w-full btn btn-secondary">
                        <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                        Edit Content
                    </a>
                    <button onclick="confirmDelete('{{content._id}}', '{{content.title}}', '/admin/contents')" class="w-full btn btn-danger">
                        <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        Delete Content
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Trigger analysis function with model selection
    function triggerAnalysis(contentId) {
        // First fetch available models
        fetch('/api/quota/models')
            .then(response => response.json())
            .then(data => {
                const models = data.models;
                
                // Create a simple prompt with model selection
                let modelOptions = models.map(model => `${model}`).join('\n');
                let selectedModel = prompt(`Select a model for analysis:\n\n${modelOptions}\n\nEnter model name (or leave empty for auto-select):`);
                
                // Validate model selection
                if (selectedModel && !models.includes(selectedModel)) {
                    alert('Invalid model selected. Please choose from the available models.');
                    return;
                }
                
                if (confirm(`Start analysis for this content${selectedModel ? ` using model: ${selectedModel}` : ' with auto-model selection'}?`)) {
                    const requestBody = { contentId };
                    if (selectedModel) {
                        requestBody.model = selectedModel;
                    }
                    
                    fetch('/api/test-video-analysis', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody)
                    })
                    .then(response => response.json())
                    .then(data => {
                        alert(`Analysis started! Job ID: ${data.jobId}\nModel: ${data.model}`);
                        location.reload();
                    })
                    .catch(error => {
                        alert('Error: ' + error.message);
                    });
                }
            })
            .catch(error => {
                alert('Error fetching models: ' + error.message);
            });
    }
</script> 